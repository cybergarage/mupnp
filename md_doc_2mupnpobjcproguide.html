<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mUPnP for C: Programming Guide for Objective-C</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">mUPnP for C
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',true);
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_doc_2mupnpobjcproguide.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Programming Guide for Objective-C</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md39"></a></p>
<p>This document describes how to use the mUPnP for Objective-C to create your UPnP™ devices and control points.</p>
<h1><a class="anchor" id="autotoc_md40"></a>
1 Introduction</h1>
<p>UPnP™*[^1] architecture is based on open networking to enable discovery and control of networked devices and services, such as media servers and players at home.</p>
<p>UPnP™ architecture is based on many standard protocols, such as GENA, SSDP, SOAP, HTTPU and HTTP. Therefore you have to understand and implement these protocols to create your devices of UPnP™.</p>
<p>mUPnP for MacOSX is a development package for UPnP™ developers. The mUPnP controls these protocols automatically, and supports to create your control points quickly.</p>
<p>Please see the following site and documents to know about UPnP™ in more detail.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Document   </th><th class="markdownTableHeadNone">URL    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">UPnP™ Forum   </td><td class="markdownTableBodyNone"><a href="http://www.upnp.org/">http://www.upnp.org/</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Universal Plug and Play Device Architecture   </td><td class="markdownTableBodyNone"><a href="http://www.upnp.org/download/UPnPDA10_20000613.htm">http://www.upnp.org/download/UPnPDA10_20000613.htm</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Universal Plug and Play Vendor\'s Implementation Guide   </td><td class="markdownTableBodyNone"><a href="http://www.upnp.org/download/UPnP_Vendor_Implementation_Guide_Jan2001.htm">http://www.upnp.org/download/UPnP_Vendor_Implementation_Guide_Jan2001.htm</a>   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md41"></a>
2 Setup</h1>
<h2><a class="anchor" id="autotoc_md42"></a>
2.1 System Requirement</h2>
<p>Currently, the framework is based on Objective-C 2.0. Thus, the current framework requires MacOSX v10.5, Leopard, later. In the future, I will support other lower MacOSX and iPhone v2.0.</p>
<h2><a class="anchor" id="autotoc_md43"></a>
2.2 Installer</h2>
<p>The framework is distributed as a install package as the following. Using the installer, the framework is installed into \'/Library/Framework/mUPnP.framework\' as default.</p>
<div class="image">
<img src="mupnpc-objc-macosx-installer.jpg" alt=""/>
</div>
    <h1><a class="anchor" id="autotoc_md44"></a>
3 Control Point</h1>
<h2><a class="anchor" id="autotoc_md45"></a>
3.1 Class Overview</h2>
<p>The following static structure diagram is related classes of mUPnP to create your control point of UPnP™. The control point has some root devices in the UPnP™ network.</p>
<div class="image">
<img src="mupnp-objc-ctrlpoint-class-overview.png" alt=""/>
</div>
    <h2><a class="anchor" id="autotoc_md46"></a>
3.2 Initiating</h2>
<p>To create a UPnP™ control point, create a instance of <a class="el" href="interfaceCGUpnpControlPoint.html">CGUpnpControlPoint</a> class. The new instance is activated automatically using <a class="el" href="interfaceCGUpnpControlPoint.html#a2fa0d2fe4287bf9e6596d634ae800683">start (CGUpnpControlPoint)</a>. Use <a class="el" href="interfaceCGUpnpControlPoint.html#aa2ecd4b95780704d69b82012edce7672">search (CGUpnpControlPoint)</a> or searchWithST to find the devices in the local network.</p>
<div class="fragment"><div class="line">#import &lt;mUPnP/UPnP.h&gt;</div>
<div class="line">......</div>
<div class="line">CGUpnpControlPoint *ctrlPoint = [[CGUpnpControlPoint alloc] init];</div>
<div class="line">......</div>
<div class="line">[ctrolPoint search];</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md47"></a>
3.3 Root Devices</h2>
<p>Use <a class="el" href="interfaceCGUpnpControlPoint.html">CGUpnpControlPoint</a>:devices to get the all root devices which the control point found. The method returns a NSArray object which has the devices as instances of <a class="el" href="interfaceCGUpnpDevice.html">CGUpnpDevice</a>.</p>
<div class="fragment"><div class="line">#import &lt;mUPnP/UPnP.h&gt;</div>
<div class="line">......</div>
<div class="line">CGUpnpControlPoint \*ctrlPoint = [[CGUpnpControlPoint alloc] init];</div>
<div class="line">......</div>
<div class="line">[ctrolPoint search];</div>
<div class="line"> </div>
<div class="line">NSArray *devArray = [ctrlPoint devices];</div>
<div class="line">for (CGUpnpDevice *dev in devArray)</div>
<div class="line">    NSLog(@&quot;%@&quot;, [dev friendlyName]);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md48"></a>
3.4 Control</h2>
<p>The control point can send action or query control messages to the discovered devices. To send the action control message, use CGUpnpAction:setArgumentValue:forName and <a class="el" href="interfaceCGUpnpAction.html">CGUpnpAction</a>:post. You should set the action values to the all input arguments, and the output argument values is ignored if you set. The following sample posts a action control request that sets a new time, and output the response result.</p>
<div class="fragment"><div class="line">CGUpnpDevice *clockDev = .....</div>
<div class="line">CGUpnpService *timeService = [clockDev getServiceForType:@&quot;urn:schemas-upnp-org:service:xxxxx:1&quot;];</div>
<div class="line">CGUpnpAction *setTimeAct = [timeService getActionForName:@&quot;SetTime&quot;];</div>
<div class="line"> </div>
<div class="line">NSString *currTime = ......</div>
<div class="line">[setTimeAct setArgumentValue: currTime forName:@&quot;NewTime&quot;];</div>
<div class="line">if ([setTimeAct post]) {</div>
<div class="line">    NSArray \*argArray = [ setTimeAct arguments]; for (CGUpnpArgument \*arg in argArray)</div>
<div class="line">    NSLog(@&quot;%@ = %@&quot;, [arg name], [arg value]]);</div>
<div class="line">}</div>
</div><!-- fragment --><p>Similarly, to send the query control message, use <a class="el" href="interfaceCGUpnpStateVariable.html#a5a46cedaa5838d6cc8577077dc04b079">query (CGUpnpStateVariable)</a>. The following sample posts a query control request, and output the return value.</p>
<div class="fragment"><div class="line">CGUpnpDevice *clockDev = ......</div>
<div class="line">CGUpnpService *timeService = [clockDev getServiceForType:@&quot;urn:schemas-upnp-org:service:xxxxx:1&quot;];</div>
<div class="line">CGUpnpStateVariable *timeStateVar = [timeService &quot;time&quot;]; </div>
<div class="line">if ([timeStateVar query])</div>
<div class="line">    NSLog(@&quot;%@ = %@&quot;, [timeStateVar name], [timeStateVar value]]);</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
