<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mUPnP for C: mUPnP for MacOSX Programming Guide Document Version 2.2</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">mUPnP for C
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',true);
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_doc_2mupnpobjcproguide.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">mUPnP for MacOSX Programming Guide Document Version 2.2</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md31"></a></p>
<h1><a class="anchor" id="autotoc_md32"></a>
1 Introduction</h1>
<p>UPnP™*[^1] architecture is based on open networking to enable discovery and control of networked devices and services, such as media servers and players at home.</p>
<p>UPnP™ architecture is based on many standard protocols, such as GENA, SSDP, SOAP, HTTPU and HTTP. Therefore you have to understand and implement these protocols to create your devices of UPnP™.</p>
<p>mUPnP for MacOSX is a development package for UPnP™ developers. The mUPnP controls these protocols automatically, and supports to create your control points quickly.</p>
<p>Please see the following site and documents to know about UPnP™ in more detail.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Document   </th><th class="markdownTableHeadNone">URL    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">UPnP™ Forum   </td><td class="markdownTableBodyNone"><a href="http://www.upnp.org/">http://www.upnp.org/</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Universal Plug and Play Device Architecture   </td><td class="markdownTableBodyNone"><a href="http://www.upnp.org/download/UPnPDA10_20000613.htm">http://www.upnp.org/download/UPnPDA10_20000613.htm</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Universal Plug and Play Vendor\'s Implementation Guide   </td><td class="markdownTableBodyNone"><a href="http://www.upnp.org/download/UPnP_Vendor_Implementation_Guide_Jan2001.htm">http://www.upnp.org/download/UPnP_Vendor_Implementation_Guide_Jan2001.htm</a>   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md33"></a>
2 Setup</h1>
<h2><a class="anchor" id="autotoc_md34"></a>
2.1 System Requirement</h2>
<p>Currently, the framework is based on Objective-C 2.0. Thus, the current framework requires MacOSX v10.5, Leopard, later. In the future, I will support other lower MacOSX and iPhone v2.0.</p>
<h2><a class="anchor" id="autotoc_md35"></a>
2.2 Installer</h2>
<p>The framework is distributed as a install package as the following. Using the installer, the framework is installed into \'/Library/Framework/mUPnP.framework\' as default.</p>
<div class="image">
<img src="mupnpc-objc-macosx-installer.jpg" alt=""/>
</div>
    <h1><a class="anchor" id="autotoc_md36"></a>
3 Control Point</h1>
<h2><a class="anchor" id="autotoc_md37"></a>
3.1 Class Overview</h2>
<p>The following static structure diagram is related classes of mUPnP to create your control point of UPnP™. The control point has some root devices in the UPnP™ network.</p>
<div class="fragment"><div class="line">@startuml</div>
<div class="line">class CGUpnpControlPoint {</div>
<div class="line">+start()</div>
<div class="line">+stop()</div>
<div class="line">+search()</div>
<div class="line">+searchWithST()</div>
<div class="line">+setSsdpSearchMX()</div>
<div class="line">+ssdpSearchMX()</div>
<div class="line">+devices()    </div>
<div class="line">}</div>
<div class="line">class CGUpnpDevice {</div>
<div class="line">+friendlyName()</div>
<div class="line">+deviceType()</div>
<div class="line">+isDeviceType()</div>
<div class="line">+services()</div>
<div class="line">+getServiceForID()</div>
<div class="line">+getServiceForType()</div>
<div class="line">}</div>
<div class="line">class CGUpnpService {</div>
<div class="line">+serviceId()</div>
<div class="line">+serviceType()</div>
<div class="line">+actions()</div>
<div class="line">+stateVariables()</div>
<div class="line">+getActionByName()</div>
<div class="line">+getStateVariableByName()</div>
<div class="line">}</div>
<div class="line">class CGUpnpAction {</div>
<div class="line">+name()</div>
<div class="line">+arguments()</div>
<div class="line">+setArgumentValue:forName()</div>
<div class="line">+argumentValueForName()</div>
<div class="line">+post()</div>
<div class="line">+postWithArguments()</div>
<div class="line">+statusCode()</div>
<div class="line">}</div>
<div class="line">class CGUpnpStateVariable {</div>
<div class="line">+name()</div>
<div class="line">+value()</div>
<div class="line">+query()</div>
<div class="line">+statusCode()</div>
<div class="line">}</div>
<div class="line">CGUpnpControlPoint *-- CGUpnpDevice</div>
<div class="line">CGUpnpDevice *-- CGUpnpService</div>
<div class="line">CGUpnpService *-- CGUpnpAction</div>
<div class="line">CGUpnpService *-- CGUpnpStateVariable</div>
<div class="line">@enduml</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md38"></a>
3.2 Initiating</h2>
<p>To create a UPnP™ control point, create a instance of <a class="el" href="interfaceCGUpnpControlPoint.html">CGUpnpControlPoint</a> class. The new instance is activated automatically using <a class="el" href="interfaceCGUpnpControlPoint.html#a2fa0d2fe4287bf9e6596d634ae800683">start (CGUpnpControlPoint)</a>. Use <a class="el" href="interfaceCGUpnpControlPoint.html#aa2ecd4b95780704d69b82012edce7672">search (CGUpnpControlPoint)</a> or searchWithST to find the devices in the local network.</p>
<div class="fragment"><div class="line">#import &lt;mUPnP/UPnP.h&gt;</div>
<div class="line">......</div>
<div class="line">CGUpnpControlPoint *ctrlPoint = [[CGUpnpControlPoint alloc] init];</div>
<div class="line">......</div>
<div class="line">[ctrolPoint search];</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md39"></a>
3.3 Root Devices</h2>
<p>Use <a class="el" href="interfaceCGUpnpControlPoint.html">CGUpnpControlPoint</a>:devices to get the all root devices which the control point found. The method returns a NSArray object which has the devices as instances of <a class="el" href="interfaceCGUpnpDevice.html">CGUpnpDevice</a>.</p>
<div class="fragment"><div class="line">#import &lt;mUPnP/UPnP.h&gt;</div>
<div class="line">......</div>
<div class="line">CGUpnpControlPoint \*ctrlPoint = [[CGUpnpControlPoint alloc] init];</div>
<div class="line">......</div>
<div class="line">[ctrolPoint search];</div>
<div class="line"> </div>
<div class="line">NSArray *devArray = [ctrlPoint devices];</div>
<div class="line">for (CGUpnpDevice *dev in devArray)</div>
<div class="line">    NSLog(@&quot;%@&quot;, [dev friendlyName]);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md40"></a>
3.4 Control</h2>
<p>The control point can send action or query control messages to the discovered devices. To send the action control message, use CGUpnpAction:setArgumentValue:forName and <a class="el" href="interfaceCGUpnpAction.html">CGUpnpAction</a>:post. You should set the action values to the all input arguments, and the output argument values is ignored if you set. The following sample posts a action control request that sets a new time, and output the response result.</p>
<div class="fragment"><div class="line">CGUpnpDevice *clockDev = .....</div>
<div class="line">CGUpnpService *timeService = [clockDev getServiceForType:@&quot;urn:schemas-upnp-org:service:xxxxx:1&quot;];</div>
<div class="line">CGUpnpAction *setTimeAct = [timeService getActionForName:@&quot;SetTime&quot;];</div>
<div class="line"> </div>
<div class="line">NSString *currTime = ......</div>
<div class="line">[setTimeAct setArgumentValue: currTime forName:@&quot;NewTime&quot;];</div>
<div class="line">if ([setTimeAct post]) {</div>
<div class="line">    NSArray \*argArray = [ setTimeAct arguments]; for (CGUpnpArgument \*arg in argArray)</div>
<div class="line">    NSLog(@&quot;%@ = %@&quot;, [arg name], [arg value]]);</div>
<div class="line">}</div>
</div><!-- fragment --><p>Similarly, to send the query control message, use <a class="el" href="interfaceCGUpnpStateVariable.html#a5a46cedaa5838d6cc8577077dc04b079">query (CGUpnpStateVariable)</a>. The following sample posts a query control request, and output the return value.</p>
<div class="fragment"><div class="line">CGUpnpDevice *clockDev = ......</div>
<div class="line">CGUpnpService *timeService = [clockDev getServiceForType:@&quot;urn:schemas-upnp-org:service:xxxxx:1&quot;];</div>
<div class="line">CGUpnpStateVariable *timeStateVar = [timeService &quot;time&quot;]; </div>
<div class="line">if ([timeStateVar query])</div>
<div class="line">    NSLog(@&quot;%@ = %@&quot;, [timeStateVar name], [timeStateVar value]]);</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md41"></a>
4 License</h1>
<p>Copyright (c) 2004-2006, Satoshi Konno Copyright (c) 2005-2006, Nokia Corporation Copyright (c) 2005-2006, Theo Beisch Collectively the Copyright Owners All rights reserved.</p>
<p>Subject to the below, redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p>
<ul>
<li>Redistributions of source code must retain the above copyright notice, this list of conditions and thefollowing disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and thefollowing disclaimer in the documentation and/or other materials provided with the distribution.</li>
<li>Neither the names of the Copyright Owners nor the names of its contributors may be used to endorse orpromote products derived from this software without specific prior written permission.</li>
</ul>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT OWNERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. While any of the respective Copyright Owners licenses and/or distributes this software and any files contained therein under its or third party copyrights, for clarification it is hereby stated that no patent license explicit or implied is granted by any of the Copyright Owners in connection to this license or distribution of this software.</p>
<p>In addition to the disclaimer above and not limiting its generality, no assurances are provided by the Copyright Owners that the software does not infringe patents of either third parties or any of the Copyright Owners in any particular jurisdiction. As a condition to exercising the rights and licenses granted hereunder in any particular jurisdiction, each recipient hereby assumes sole responsibility to procure licenses under any relevant patents in that jurisdiction. For example, if a third party patent license is required to allow recipient to distribute the program in a particular country, it is the recipient\'s responsibility to acquire that license before distributing the program.</p>
<p>This software has been supported by IPA, INFORMATION-TECHNOLOGY PROMOTION AGENCY, JAPAN, as a project of Exploratory Software Project.</p>
<p>[^1]: UPnP™ is a certification mark of the UPnP™ Implementers Corporation.　 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
